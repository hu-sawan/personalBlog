(self.webpackChunkclient=self.webpackChunkclient||[]).push([[357],{771:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var n=a(2791),s=a(5984),o=a(4702),l=a(276),i=a(8011);const r=(0,o.ZF)({apiKey:"AIzaSyA-_mN8JlzeTX-XCVdITdbbvD14Bl4rbcc",authDomain:"personalblog-364f2.firebaseapp.com",projectId:"personalblog-364f2",storageBucket:"personalblog-364f2.appspot.com",messagingSenderId:"741208860836",appId:"1:741208860836:web:6c9b9a42a2540cc1d71e31"}),c=(0,i.v0)(r),u=(0,l.cF)(r);var d=a(222),p=(a(3178),a(184));const m=function(e){let{id:t,onChange:a,value:s}=e;const o=(0,n.useMemo)((()=>({showIcons:["code"],hideIcons:["quote","fullscreen","image","side-by-side"],previewRender:e=>"<strong>Currently working on this</strong>"})),[]);return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(d.Z,{id:t,value:s,onChange:a,options:o})})};var h=a(752);const f=(0,s.x0)();const g=function(){const[e,t]=(0,n.useState)(!1),[a,s]=(0,n.useState)(""),[o,i]=(0,n.useState)({_id:f,title:"",content:"",author:"",facebook:"",linkedin:"",youtube:"",imageUrl:""}),r=(0,n.useRef)(!1),c=async e=>{try{const a=await(async e=>{const a=null===e||void 0===e?void 0:e.files[0];if(!a)return void s("Image was not submitted!");const n=a.type.split("/"),o=n[n.length-1],i=(0,l.iH)(u,"posts/".concat(f,".").concat(o));t(!0);const r=await(0,l.KV)(i,a),c=await(0,l.Jt)(r.ref);if(c)return c;s("Image was not uploaded!")})(e);if(!a)return;i((e=>({...e,imageUrl:a})))}catch(a){console.log(a)}};(0,n.useEffect)((()=>{const e=async()=>{await(async()=>{try{(await fetch("http://localhost:3001/api/addPost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok&&console.log("post sent successfully"),t(!1)}catch(e){console.log(e)}})(),a||window.location.reload()};r.current?e():r.current=!0}),[o.imageUrl]);const d=e=>{i((t=>({...t,[e.target.name]:e.target.value})))};return(0,p.jsxs)(p.Fragment,{children:[e&&(0,p.jsx)(h.Z,{isActive:e}),(0,p.jsx)("div",{className:"post-form-section",children:(0,p.jsxs)("div",{className:"container",children:[(0,p.jsx)("h2",{children:"Add Post"}),a&&(0,p.jsx)("div",{className:"alert",children:a}),(0,p.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),s("");for(const t of e.target)"file"===t.type&&await c(t)},children:[(0,p.jsx)("input",{value:o.title,type:"text",name:"title",placeholder:"Enter post title",onChange:d}),(0,p.jsx)("input",{value:o.author,type:"text",name:"author",placeholder:"Enter your name",onChange:d}),(0,p.jsx)("input",{value:o.facebook,type:"text",name:"facebook",placeholder:"Enter facebook url",onChange:d}),(0,p.jsx)("input",{value:o.linkedin,type:"text",name:"linkedin",placeholder:"Enter linkedin url",onChange:d}),(0,p.jsx)("input",{value:o.youtube,type:"text",name:"youtube",placeholder:"Enter youtube url",onChange:d}),(0,p.jsx)(m,{id:"content-md",onChange:e=>i((t=>({...t,content:e}))),value:o.content}),(0,p.jsx)("input",{type:"file",required:!0}),(0,p.jsx)("input",{type:"submit"})]})]})})]})};const x=function(){const[e,t]=(0,n.useState)(null),[a,s]=(0,n.useState)(""),[o,l]=(0,n.useState)(!1),[r,u]=(0,n.useState)({email:"",password:""}),d=e=>{u((t=>({...t,[e.target.name]:e.target.value})))};return(0,n.useEffect)((()=>(0,i.Aj)(c,(e=>{t(e)}))),[]),(0,n.useEffect)((()=>{setTimeout((()=>{s("")}),4e3)}),[a]),e?(0,p.jsx)(g,{}):(0,p.jsx)("div",{className:"login-section container",children:(0,p.jsxs)("div",{className:"form-card",children:[(0,p.jsx)("h2",{children:"Login"}),(0,p.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{s(""),l(!0),await(0,i.e5)(c,r.email,r.password)}catch{s("Failed to log in")}l(!1)},children:[(0,p.jsx)("div",{className:"alert ".concat(a?"show":null),children:a}),(0,p.jsx)("label",{htmlFor:"email",children:"Email"}),(0,p.jsx)("input",{name:"email",value:r.email,onChange:d,type:"email",className:"form-control",id:"email",placeholder:"Email"}),(0,p.jsx)("label",{htmlFor:"password",children:"Password"}),(0,p.jsx)("input",{name:"password",value:r.password,onChange:d,type:"password",className:"form-control",id:"password",placeholder:"Password"}),(0,p.jsx)("input",{type:"submit",className:"submit-btn",disabled:o})]})]})})}},2562:()=>{}}]);
//# sourceMappingURL=357.dac2dd65.chunk.js.map