"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[84],{84:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var n=a(791),s=a(984),o=a(702),l=a(276),c=a(11);const i=(0,o.ZF)({apiKey:"AIzaSyA-_mN8JlzeTX-XCVdITdbbvD14Bl4rbcc",authDomain:"personalblog-364f2.firebaseapp.com",projectId:"personalblog-364f2",storageBucket:"personalblog-364f2.appspot.com",messagingSenderId:"741208860836",appId:"1:741208860836:web:6c9b9a42a2540cc1d71e31"}),r=(0,c.v0)(i),u=(0,l.cF)(i);var d=a(752),p=a(184);const m=(0,s.x0)();const h=function(){const[e,t]=(0,n.useState)(!1),[a,s]=(0,n.useState)(""),[o,c]=(0,n.useState)({_id:m,title:"",content:"",author:"",facebook:"",linkedin:"",youtube:"",imageUrl:""}),i=(0,n.useRef)(!1),r=async e=>{try{const a=await(async e=>{const a=null===e||void 0===e?void 0:e.files[0];if(!a)return void s("Image was not submitted!");const n=a.type.split("/"),o=n[n.length-1],c=(0,l.iH)(u,"posts/".concat(m,".").concat(o));t(!0);const i=await(0,l.KV)(c,a),r=await(0,l.Jt)(i.ref);if(r)return r;s("Image was not uploaded!")})(e);if(!a)return;c((e=>({...e,imageUrl:a})))}catch(a){console.log(a)}};(0,n.useEffect)((()=>{const e=async()=>{await(async()=>{try{console.log(o),(await fetch("http://localhost:3001/api/addPost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok&&console.log("post sent successfully"),t(!1)}catch(e){console.log(e)}})(),a||window.location.reload()};i.current?e():i.current=!0}),[o.imageUrl]);const h=e=>{c((t=>({...t,[e.target.name]:e.target.value})))};return(0,p.jsxs)(p.Fragment,{children:[e&&(0,p.jsx)(d.Z,{isActive:e}),(0,p.jsx)("div",{className:"post-form-section",children:(0,p.jsxs)("div",{className:"container",children:[(0,p.jsx)("h2",{children:"Add Post"}),a&&(0,p.jsx)("div",{className:"alert",children:a}),(0,p.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),s("");for(const t of e.target)"file"===t.type&&await r(t)},children:[(0,p.jsx)("input",{value:o.title,type:"text",name:"title",placeholder:"Enter post title",onChange:h}),(0,p.jsx)("input",{value:o.author,type:"text",name:"author",placeholder:"Enter your name",onChange:h}),(0,p.jsx)("input",{value:o.facebook,type:"text",name:"facebook",placeholder:"Enter facebook url",onChange:h}),(0,p.jsx)("input",{value:o.linkedin,type:"text",name:"linkedin",placeholder:"Enter linkedin url",onChange:h}),(0,p.jsx)("input",{value:o.youtube,type:"text",name:"youtube",placeholder:"Enter youtube url",onChange:h}),(0,p.jsx)("textarea",{name:"content",placeholder:"enter post content",onChange:h,value:o.content}),(0,p.jsx)("input",{type:"file",required:!0}),(0,p.jsx)("input",{type:"submit"})]})]})})]})};const f=function(){const[e,t]=(0,n.useState)(null),[a,s]=(0,n.useState)(""),[o,l]=(0,n.useState)(!1),[i,u]=(0,n.useState)({email:"",password:""}),d=e=>{u((t=>({...t,[e.target.name]:e.target.value})))};return(0,n.useEffect)((()=>(0,c.Aj)(r,(e=>{t(e)}))),[]),(0,n.useEffect)((()=>{setTimeout((()=>{s("")}),4e3)}),[a]),e?(0,p.jsx)(h,{}):(0,p.jsx)("div",{className:"login-section container",children:(0,p.jsxs)("div",{className:"form-card",children:[(0,p.jsx)("h2",{children:"Login"}),(0,p.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{s(""),l(!0),await(0,c.e5)(r,i.email,i.password)}catch{s("Failed to log in")}l(!1)},children:[(0,p.jsx)("div",{className:"alert ".concat(a?"show":null),children:a}),(0,p.jsx)("label",{htmlFor:"email",children:"Email"}),(0,p.jsx)("input",{name:"email",value:i.email,onChange:d,type:"email",className:"form-control",id:"email",placeholder:"Email"}),(0,p.jsx)("label",{htmlFor:"password",children:"Password"}),(0,p.jsx)("input",{name:"password",value:i.password,onChange:d,type:"password",className:"form-control",id:"password",placeholder:"Password"}),(0,p.jsx)("input",{type:"submit",className:"submit-btn",disabled:o})]})]})})}}}]);
//# sourceMappingURL=84.3db87f5f.chunk.js.map